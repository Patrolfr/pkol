<div class="card">
  <img [src]="product.image" alt="{{ product.name }}" class="card-img-top img-fluid">
  <div class="card-body">
    <h3 class="card-title">
      {{ product.name }}
      <h5>
        <small class="text-warning mb-2">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
        </small>
        ({{ 40 }})
      </h5>
    </h3>
    <h4>{{product.price}} PLN</h4>
    <div class="text-info asd">Discount: {{product.discount}} PLN</div>
    <div class="text-info asd">On stock: {{product.items_left}} </div>
    <div class="text-info asd">Expires on: {{product.expiration_timestamp}}</div>
    <p [textContent]="product.description" class="card-text"></p>
  </div>
  <div class="card-footer">
    <form #productsAmountForm="ngForm" (ngSubmit)="onSubmitItem()">
      <div class="row">
        <div class="col-xs-3">
          <label for="amount">Amount</label>
        </div>
        <div class="col-xs-2" style="margin: 10px">
          <input
            class="form-control"
            id="amount"
            name="amount"
            ngModel
            pattern="^[1-9]+[0-9]*$"
            required
            type="number"
          >
        </div>

        <div class="col-xs-7">
          <button
            [disabled]="productsAmountForm.invalid"
            class="btn btn-success btn-block btn-lg"
            type="submit">Dodaj do koszyka!
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<div *ngIf="authenticationService.isLogged()">
  <div class="row">
    <h3>Add a review:</h3>
  </div>
  <div class="row">
    <form [formGroup]="reviewForm" (ngSubmit)="onSubmitReview()">
      <div class="form-row">
        <label>Rating</label>
        <select formControlName="rating" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f.rating.errors }">
          <option [ngValue]=""></option>
          <option [ngValue]="0">0</option>
          <option [ngValue]="1">1</option>
          <option [ngValue]="2">2</option>
          <option [ngValue]="4">4</option>
          <option [ngValue]="5">5</option>
        </select>
        <div *ngIf="submitted && f.rating.errors" class="invalid-feedback">
          <div *ngIf="f.rating.errors.required">Rating field is required</div>
        </div>
      </div>
      <div class="form-row">
        <label>Comment</label>
        <input type="text" formControlName="comment" class="form-control"
               [ngClass]="{ 'is-invalid': submitted && f.comment.errors }">
        <div *ngIf="submitted && f.comment.errors" class="invalid-feedback">
          <div *ngIf="f.comment.errors.required">Comment field is required</div>
        </div>
      </div>
      <div class="submit">
        <button class="btn btn-primary mr-1">Submit</button>
      </div>
    </form>
  </div>

</div>


<div class="row">
  <h3>Reviews:</h3>
</div>

<div *ngFor="let review of reviews" class="reviews">
  <div style="border-style: solid">
    <div class="row" style="border-bottom-style: dashed ;margin: 0">
      <h5>User: {{review.username}} => Rating: {{review.rating}}</h5>
    </div>
    <div class="row" style="margin: 0">
      <p>Review: {{review.comment}}</p>
    </div>
  </div>
</div>


